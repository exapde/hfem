function [fh,fh_udg,fh_uh] = fhat3d(nl,pg,udg,uh,param,time)
%FHAT3D
%    [FH,FH_UDG,FH_UH] = FHAT3D(NL,PG,UDG,UH,PARAM,TIME)

%    This function was generated by the Symbolic Math Toolbox version 7.1.
%    08-Mar-2017 15:39:06
[ng,nc] = size(udg);
nch = 3;
nd = 3;
mu = param{1};
nl1 = nl(:,1);
nl2 = nl(:,2);
nl3 = nl(:,3);
one = ones(ng,1);
pres = udg(:,4);
q11 = udg(:,5);
q12 = udg(:,8);
q13 = udg(:,11);
q21 = udg(:,6);
q22 = udg(:,9);
q23 = udg(:,12);
q31 = udg(:,7);
q32 = udg(:,10);
q33 = udg(:,13);
tau = param{3};
u1 = udg(:,1);
u2 = udg(:,2);
u3 = udg(:,3);
uh1 = uh(:,1);
uh2 = uh(:,2);
uh3 = uh(:,3);
zero = zeros(ng,1);
t2 = q21.*q32;
t29 = q22.*q31;
t3 = t2-t29;
t4 = q21.*q33;
t30 = q23.*q31;
t5 = t4-t30;
t6 = q11.*q22.*q33;
t7 = q12.*q23.*q31;
t8 = q13.*q21.*q32;
t13 = q11.*q23.*q32;
t14 = q12.*q21.*q33;
t15 = q13.*q22.*q31;
t9 = t6+t7+t8-t13-t14-t15;
t10 = 1.0./t9;
t11 = q22.*q33;
t31 = q23.*q32;
t12 = t11-t31;
t16 = q11.*q32;
t32 = q12.*q31;
t17 = t16-t32;
t18 = q11.*q33;
t33 = q13.*q31;
t19 = t18-t33;
t20 = q12.*q33;
t34 = q13.*q32;
t21 = t20-t34;
t22 = q11.*q22;
t35 = q12.*q21;
t23 = t22-t35;
t24 = q11.*q23;
t36 = q13.*q21;
t25 = t24-t36;
t26 = q12.*q23;
t37 = q13.*q22;
t27 = t26-t37;
fh = [-nl3.*(-mu.*q13+pres.*t3+mu.*t3.*t10)+nl2.*(mu.*q12+pres.*t5+mu.*t5.*t10)-nl1.*(-mu.*q11+pres.*t12+mu.*t10.*t12)+tau.*(u1-uh1);nl3.*(mu.*q23+pres.*t17+mu.*t10.*t17)-nl2.*(-mu.*q22+pres.*t19+mu.*t10.*t19)+nl1.*(mu.*q21+pres.*t21+mu.*t10.*t21)+tau.*(u2-uh2);-nl3.*(-mu.*q33+pres.*t23+mu.*t10.*t23)+nl2.*(mu.*q32+pres.*t25+mu.*t10.*t25)-nl1.*(-mu.*q31+pres.*t27+mu.*t10.*t27)+tau.*(u3-uh3)];
if nargout > 1
    t28 = one.*tau;
    t38 = 1.0./t9.^2;
    t39 = pres.*q32;
    t40 = mu.*q32.*t10;
    t41 = pres.*q33;
    t42 = mu.*q33.*t10;
    t43 = pres.*q22;
    t44 = mu.*q22.*t10;
    t45 = pres.*q23;
    t46 = mu.*q23.*t10;
    t47 = mu.*nl1.*t12.*t27.*t38;
    t48 = pres.*q12;
    t49 = mu.*q12.*t10;
    t50 = pres.*q13;
    t51 = mu.*q13.*t10;
    t52 = mu.*t5.*t21.*t38;
    t53 = t41+t42+t52;
    t54 = mu.*t5.*t27.*t38;
    t55 = t45+t46+t54;
    t56 = pres.*q31;
    t57 = mu.*q31.*t10;
    t58 = t41+t42-mu.*t12.*t19.*t38;
    t59 = mu.*t19.*t27.*t38;
    t60 = t50+t51+t59;
    t61 = pres.*q21;
    t62 = mu.*q21.*t10;
    t63 = t45+t46-mu.*t12.*t25.*t38;
    t64 = mu.*nl2.*t5.*t25.*t38;
    t65 = pres.*q11;
    t66 = mu.*q11.*t10;
    t67 = t50+t51-mu.*t21.*t25.*t38;
    t68 = mu.*t3.*t19.*t38;
    t69 = t56+t57+t68;
    t70 = mu.*t3.*t21.*t38;
    t71 = t39+t40+t70;
    t72 = mu.*t3.*t25.*t38;
    t73 = t61+t62+t72;
    t74 = mu.*t3.*t27.*t38;
    t75 = t43+t44+t74;
    t76 = t56+t57-mu.*t5.*t17.*t38;
    t77 = t39+t40-mu.*t12.*t17.*t38;
    t78 = mu.*t17.*t25.*t38;
    t79 = t65+t66+t78;
    t80 = mu.*t17.*t27.*t38;
    t81 = t48+t49+t80;
    t82 = t61+t62-mu.*t5.*t23.*t38;
    t83 = t43+t44-mu.*t12.*t23.*t38;
    t84 = mu.*nl3.*t3.*t23.*t38;
    t85 = t65+t66-mu.*t19.*t23.*t38;
    t86 = t48+t49-mu.*t21.*t23.*t38;
    fh_udg = [t28;zero;zero;zero;t28;zero;zero;zero;t28;-nl3.*t3+nl2.*t5-nl1.*t12;nl3.*t17-nl2.*t19+nl1.*t21;-nl3.*t23+nl2.*t25-nl1.*t27;nl1.*(mu+mu.*t12.^2.*t38)+mu.*nl3.*t3.*t12.*t38-mu.*nl2.*t5.*t12.*t38;-nl2.*t58+nl3.*t77-mu.*nl1.*t12.*t21.*t38;t47+nl2.*t63-nl3.*t83;nl2.*t53-nl3.*t71-mu.*nl1.*t12.*t21.*t38;nl1.*(mu+mu.*t21.^2.*t38)+mu.*nl3.*t17.*t21.*t38-mu.*nl2.*t19.*t21.*t38;-nl2.*t67+nl3.*t86-mu.*nl1.*t21.*t27.*t38;t47-nl2.*t55+nl3.*t75;nl2.*t60-nl3.*t81-mu.*nl1.*t21.*t27.*t38;nl1.*(mu+mu.*t27.^2.*t38)+mu.*nl3.*t23.*t27.*t38-mu.*nl2.*t25.*t27.*t38;nl2.*(mu+mu.*t5.^2.*t38)-mu.*nl3.*t3.*t5.*t38-mu.*nl1.*t5.*t12.*t38;nl1.*t53-nl3.*t76-mu.*nl2.*t5.*t19.*t38;t64-nl1.*t55+nl3.*t82;-nl1.*t58+nl3.*t69-mu.*nl2.*t5.*t19.*t38;nl2.*(mu+mu.*t19.^2.*t38)-mu.*nl3.*t17.*t19.*t38-mu.*nl1.*t19.*t21.*t38;nl1.*t60-nl3.*t85-mu.*nl2.*t19.*t25.*t38;t64+nl1.*t63-nl3.*t73;-nl1.*t67+nl3.*t79-mu.*nl2.*t19.*t25.*t38;nl2.*(mu+mu.*t25.^2.*t38)-mu.*nl3.*t23.*t25.*t38-mu.*nl1.*t25.*t27.*t38;nl3.*(mu+mu.*t3.^2.*t38)-mu.*nl2.*t3.*t5.*t38+mu.*nl1.*t3.*t12.*t38;nl2.*t69-nl1.*t71-mu.*nl3.*t3.*t17.*t38;t84-nl2.*t73+nl1.*t75;nl1.*t77-nl2.*t76-mu.*nl3.*t3.*t17.*t38;nl3.*(mu+mu.*t17.^2.*t38)-mu.*nl2.*t17.*t19.*t38+mu.*nl1.*t17.*t21.*t38;nl2.*t79-nl1.*t81-mu.*nl3.*t17.*t23.*t38;t84-nl1.*t83+nl2.*t82;nl1.*t86-nl2.*t85-mu.*nl3.*t17.*t23.*t38;nl3.*(mu+mu.*t23.^2.*t38)-mu.*nl2.*t23.*t25.*t38+mu.*nl1.*t23.*t27.*t38];
end
if nargout > 2
    fh_uh = [-t28;zero;zero;zero;-t28;zero;zero;zero;-t28];
end
fh = reshape(fh,ng,nch);
fh_udg = reshape(fh_udg,ng,nch,nc);
fh_uh = reshape(fh_uh,ng,nch,nch);
