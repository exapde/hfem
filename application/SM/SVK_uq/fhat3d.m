function [fh,fh_udg,fh_uh] = fhat3d(nl,pg,udg,uh,param,time)
%FHAT3D
%    [FH,FH_UDG,FH_UH] = FHAT3D(NL,PG,UDG,UH,PARAM,TIME)

%    This function was generated by the Symbolic Math Toolbox version 7.1.
%    19-Mar-2017 09:34:49
[ng,nc] = size(udg);
nch = 3;
nd = 3;
lambda = param{2};
mu = param{1};
nl1 = nl(:,1);
nl2 = nl(:,2);
nl3 = nl(:,3);
one = ones(ng,1);
q11 = udg(:,4);
q12 = udg(:,7);
q13 = udg(:,10);
q21 = udg(:,5);
q22 = udg(:,8);
q23 = udg(:,11);
q31 = udg(:,6);
q32 = udg(:,9);
q33 = udg(:,12);
tau = param{3};
u1 = udg(:,1);
u2 = udg(:,2);
u3 = udg(:,3);
uh1 = uh(:,1);
uh2 = uh(:,2);
uh3 = uh(:,3);
zero = zeros(ng,1);
t2 = q11.^2;
t3 = t2.*(1.0./2.0);
t4 = q21.^2;
t5 = t4.*(1.0./2.0);
t6 = q31.^2;
t7 = t6.*(1.0./2.0);
t8 = q12.^2;
t9 = t8.*(1.0./2.0);
t10 = q22.^2;
t11 = t10.*(1.0./2.0);
t12 = q32.^2;
t13 = t12.*(1.0./2.0);
t14 = q13.^2;
t15 = t14.*(1.0./2.0);
t16 = q23.^2;
t17 = t16.*(1.0./2.0);
t18 = q33.^2;
t19 = t18.*(1.0./2.0);
t20 = t3+t5+t7+t9+t11+t13+t15+t17+t19-3.0./2.0;
t21 = lambda.*t20;
t22 = q11.*q12.*(1.0./2.0);
t23 = q21.*q22.*(1.0./2.0);
t24 = q31.*q32.*(1.0./2.0);
t25 = t22+t23+t24;
t26 = q11.*q13.*(1.0./2.0);
t27 = q21.*q23.*(1.0./2.0);
t28 = q31.*q33.*(1.0./2.0);
t29 = t26+t27+t28;
t30 = q12.*q13.*(1.0./2.0);
t31 = q22.*q23.*(1.0./2.0);
t32 = q32.*q33.*(1.0./2.0);
t33 = t30+t31+t32;
t34 = t3+t5+t7-1.0./2.0;
t35 = mu.*t34.*2.0;
t36 = t21+t35;
t37 = t9+t11+t13-1.0./2.0;
t38 = mu.*t37.*2.0;
t39 = t21+t38;
t40 = t15+t17+t19-1.0./2.0;
t41 = mu.*t40.*2.0;
t42 = t21+t41;
fh = [tau.*(u1-uh1)+nl1.*(q11.*t36+mu.*q12.*t25.*2.0+mu.*q13.*t29.*2.0)+nl2.*(q12.*t39+mu.*q11.*t25.*2.0+mu.*q13.*t33.*2.0)+nl3.*(q13.*t42+mu.*q11.*t29.*2.0+mu.*q12.*t33.*2.0);tau.*(u2-uh2)+nl1.*(q21.*t36+mu.*q22.*t25.*2.0+mu.*q23.*t29.*2.0)+nl2.*(q22.*t39+mu.*q21.*t25.*2.0+mu.*q23.*t33.*2.0)+nl3.*(q23.*t42+mu.*q21.*t29.*2.0+mu.*q22.*t33.*2.0);tau.*(u3-uh3)+nl1.*(q31.*t36+mu.*q32.*t25.*2.0+mu.*q33.*t29.*2.0)+nl2.*(q32.*t39+mu.*q31.*t25.*2.0+mu.*q33.*t33.*2.0)+nl3.*(q33.*t42+mu.*q31.*t29.*2.0+mu.*q32.*t33.*2.0)];
if nargout > 1
    t43 = one.*tau;
    t44 = lambda.*q11;
    t45 = mu.*q11.*2.0;
    t46 = t44+t45;
    t47 = mu.*q12.*q22;
    t48 = mu.*q13.*q23;
    t49 = mu.*t25.*2.0;
    t50 = mu.*t29.*2.0;
    t51 = lambda.*q21;
    t52 = mu.*q21.*2.0;
    t53 = t51+t52;
    t54 = mu.*q12.*q32;
    t55 = mu.*q13.*q33;
    t56 = lambda.*q31;
    t57 = mu.*q31.*2.0;
    t58 = t56+t57;
    t59 = mu.*q22.*q32;
    t60 = mu.*q23.*q33;
    t61 = lambda.*q11.*q12;
    t62 = mu.*q11.*q12;
    t63 = t49+t61+t62;
    t64 = mu.*t14;
    t65 = lambda.*q12;
    t66 = mu.*q12.*2.0;
    t67 = t65+t66;
    t68 = lambda.*q12.*q21;
    t69 = mu.*q11.*q22;
    t70 = t68+t69;
    t71 = lambda.*q12.*q31;
    t72 = mu.*q11.*q32;
    t73 = t71+t72;
    t74 = mu.*q11.*q21;
    t75 = lambda.*q11.*q22;
    t76 = mu.*q12.*q21;
    t77 = t75+t76;
    t78 = lambda.*q21.*q22;
    t79 = mu.*q21.*q22;
    t80 = t49+t78+t79;
    t81 = mu.*t33.*2.0;
    t82 = mu.*t16;
    t83 = lambda.*q22;
    t84 = mu.*q22.*2.0;
    t85 = t83+t84;
    t86 = lambda.*q22.*q31;
    t87 = mu.*q21.*q32;
    t88 = t86+t87;
    t89 = mu.*q11.*q31;
    t90 = lambda.*q11.*q32;
    t91 = mu.*q12.*q31;
    t92 = t90+t91;
    t93 = lambda.*q32;
    t94 = mu.*q32.*2.0;
    t95 = t93+t94;
    t96 = mu.*q21.*q31;
    t97 = lambda.*q21.*q32;
    t98 = mu.*q22.*q31;
    t99 = t97+t98;
    t100 = lambda.*q31.*q32;
    t101 = mu.*q31.*q32;
    t102 = t49+t100+t101;
    t103 = mu.*t18;
    t104 = lambda.*q11.*q13;
    t105 = mu.*q11.*q13;
    t106 = t50+t104+t105;
    t107 = lambda.*q12.*q13;
    t108 = mu.*q12.*q13;
    t109 = t81+t107+t108;
    t110 = mu.*t2;
    t111 = mu.*t8;
    t112 = lambda.*q13;
    t113 = mu.*q13.*2.0;
    t114 = t112+t113;
    t115 = lambda.*q13.*q21;
    t116 = mu.*q11.*q23;
    t117 = t115+t116;
    t118 = lambda.*q13.*q22;
    t119 = mu.*q12.*q23;
    t120 = t118+t119;
    t121 = lambda.*q13.*q31;
    t122 = mu.*q11.*q33;
    t123 = t121+t122;
    t124 = lambda.*q13.*q32;
    t125 = mu.*q12.*q33;
    t126 = t124+t125;
    t127 = lambda.*q11.*q23;
    t128 = mu.*q13.*q21;
    t129 = t127+t128;
    t130 = lambda.*q12.*q23;
    t131 = mu.*q13.*q22;
    t132 = t130+t131;
    t133 = lambda.*q21.*q23;
    t134 = mu.*q21.*q23;
    t135 = t50+t133+t134;
    t136 = lambda.*q22.*q23;
    t137 = mu.*q22.*q23;
    t138 = t81+t136+t137;
    t139 = mu.*t4;
    t140 = mu.*t10;
    t141 = lambda.*q23;
    t142 = mu.*q23.*2.0;
    t143 = t141+t142;
    t144 = lambda.*q23.*q31;
    t145 = mu.*q21.*q33;
    t146 = t144+t145;
    t147 = lambda.*q23.*q32;
    t148 = mu.*q22.*q33;
    t149 = t147+t148;
    t150 = lambda.*q11.*q33;
    t151 = mu.*q13.*q31;
    t152 = t150+t151;
    t153 = lambda.*q12.*q33;
    t154 = mu.*q13.*q32;
    t155 = t153+t154;
    t156 = lambda.*q33;
    t157 = mu.*q33.*2.0;
    t158 = t156+t157;
    t159 = lambda.*q21.*q33;
    t160 = mu.*q23.*q31;
    t161 = t159+t160;
    t162 = lambda.*q22.*q33;
    t163 = mu.*q23.*q32;
    t164 = t162+t163;
    t165 = lambda.*q31.*q33;
    t166 = mu.*q31.*q33;
    t167 = t50+t165+t166;
    t168 = lambda.*q32.*q33;
    t169 = mu.*q32.*q33;
    t170 = t81+t168+t169;
    t171 = mu.*t6;
    t172 = mu.*t12;
    fh_udg = [t43;zero;zero;zero;t43;zero;zero;zero;t43;nl1.*(t21+t35+t64+t111+q11.*t46)+nl2.*t63+nl3.*t106;nl2.*t77+nl3.*t129+nl1.*(t47+t48+q21.*t46);nl2.*t92+nl3.*t152+nl1.*(t54+t55+q31.*t46);nl2.*t70+nl3.*t117+nl1.*(t47+t48+q11.*t53);nl1.*(t21+t35+t82+t140+q21.*t53)+nl2.*t80+nl3.*t135;nl2.*t99+nl3.*t161+nl1.*(t59+t60+q31.*t53);nl2.*t73+nl3.*t123+nl1.*(t54+t55+q11.*t58);nl2.*t88+nl3.*t146+nl1.*(t59+t60+q21.*t58);nl1.*(t21+t35+t103+t172+q31.*t58)+nl2.*t102+nl3.*t167;nl2.*(t21+t38+t64+t110+q12.*t67)+nl1.*t63+nl3.*t109;nl1.*t70+nl3.*t132+nl2.*(t48+t74+q22.*t67);nl1.*t73+nl3.*t155+nl2.*(t55+t89+q32.*t67);nl1.*t77+nl3.*t120+nl2.*(t48+t74+q12.*t85);nl2.*(t21+t38+t82+t139+q22.*t85)+nl1.*t80+nl3.*t138;nl1.*t88+nl3.*t164+nl2.*(t60+t96+q32.*t85);nl1.*t92+nl3.*t126+nl2.*(t55+t89+q12.*t95);nl1.*t99+nl3.*t149+nl2.*(t60+t96+q22.*t95);nl2.*(t21+t38+t103+t171+q32.*t95)+nl1.*t102+nl3.*t170;nl3.*(t21+t41+t110+t111+q13.*t114)+nl1.*t106+nl2.*t109;nl1.*t117+nl2.*t120+nl3.*(t47+t74+q23.*t114);nl1.*t123+nl2.*t126+nl3.*(t54+t89+q33.*t114);nl1.*t129+nl2.*t132+nl3.*(t47+t74+q13.*t143);nl3.*(t21+t41+t139+t140+q23.*t143)+nl1.*t135+nl2.*t138;nl1.*t146+nl2.*t149+nl3.*(t59+t96+q33.*t143);nl1.*t152+nl2.*t155+nl3.*(t54+t89+q13.*t158);nl1.*t161+nl2.*t164+nl3.*(t59+t96+q23.*t158);nl3.*(t21+t41+t171+t172+q33.*t158)+nl1.*t167+nl2.*t170];
end
if nargout > 2
    fh_uh = [-t43;zero;zero;zero;-t43;zero;zero;zero;-t43];
end
fh = reshape(fh,ng,nch);
fh_udg = reshape(fh_udg,ng,nch,nc);
fh_uh = reshape(fh_uh,ng,nch,nch);
